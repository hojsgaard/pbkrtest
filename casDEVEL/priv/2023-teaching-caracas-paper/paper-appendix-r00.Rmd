---
title: >
  Appendix
date: "2023-01-05"
draft: true
type: package
output: 
  rjtools::rjournal_web_article:
    self_contained: yes
    toc: no
---


```{r setup, include=FALSE}
options(prompt = 'R> ', continue = '+ ')
knitr::opts_chunk$set(echo = TRUE, cache = !TRUE, message = FALSE,
                      fig.height = 3, fig.width = 5, prompt = TRUE)
library(caracas)
options(caracas.print.method = "prettyascii")
options("digits" = 3)
```

# A short primer {#sec:primer}

This section provides a brief introduction to `caracas` to make this
paper self contained.  Readers are recommended to study the online
documentation at <https://r-cas.github.io/caracas/>.
The `caracas` package provides 
an interface from `R` to the
`Python` package `sympy` [@sympy]. This means that SymPy is
"running under the hood" of `R` via the `reticulate` 
package [@reticulate].  The `sympy` package is mature and robust with
many users and developers.

A `caracas` symbol is a list with a `pyobj` slot and the class
`caracas_symbol`.  The `pyobj` is an an object in `Python`
(often a `sympy` object).  As such, a symbol (in `R`)
provides a handle to a `Python` object.  In the design of
`caracas` we have tried to make this distinction something the
user should not be concerned with, but it is worthwhile being aware of
the distinction.

One way of defining a symbol is with `def_sym()` which declares the
symbol in `R` and in `Python`. A symbol can also be 
 defined in terms of other symbols: 
Define symbols `s1` and `s2` and define symbol `s3` in terms of `s1` and `s2`:
```{r}
def_sym(s1, s2) ## Note: 's1' and 's2' exist in both R and Python
s1$pyobj
s3_ <- s1 * s2   ## Note: 's3' is a symbol in R; no corresponding object in Python
s3_$pyobj
```

The underscore in `s3_` indicates that this expression 
is defined in terms of other symbols. This convention is used through out the paper.
Next express `s1` and `s2` in terms of symbols `u` and `v` (which are created on the fly):
```{r}
s4_ <- subs(s3_, c("s1", "s2"), c("u+v", "u-v"))
s4_
```

Another way of creating a `caracas` symbol is from an `R` object:
```{r}
v <- c("v1", "v2")
as_sym(v) ## A 2 x 1 matrix
```

A `caracas` expression can be coerced to an `R` expression and
subsequently evaluated numerically. Alternatively can be coerced to an
`R` function:

```{r}
s4_expr <- as_expr(s4_)
s4_expr
s4_fun <- as_func(s4_)
s4_fun
```

A numerical evaluation is obtained as (output omitted):
```{r, results='hide'}
eval(s4_expr, list(u=1, v=2))
s4_fun(u=1, v=2)
```

